/****************************************************************************\ 
 *** 
 *** File                  : fm_exit_ap.cpp
 *** 
 *** Generated by dSPACE Tools.
 *** (c) Copyright 2013, dSPACE GmbH. All rights reserved.
\****************************************************************************/

#if !defined(FM_EXIT_AP_CPP_)
#  define    FM_EXIT_AP_CPP_


/* -- Include directives. -- */
#  include "IOCode_Data.h"
#  include <DsApplicationInterface.h>
#  include "fm_exit_ap.h"

#  if defined(EXTERN_C_DECL)
#    undef EXTERN_C_DECL
#  endif
#  if defined(__cplusplus)
#    define EXTERN_C_DECL extern "C"
#  else
#    define EXTERN_C_DECL extern
#  endif


/* -- Variable declarations in module scope. -- */

/* Pragma to suppress GCC stack reuse which leads to problems with signal chain code */
#ifdef __GNUC__
#pragma GCC optimize "-fstack-reuse=none"
#endif

/* -- Definitions of exported functions. -- */

  void
ap_exit_RS_DS_CM11_SimulinkRS_SIDS1_TID1(
    void) 
{
{
if (tCP_1_ConnectionRequest > Connect)
{
tCP_1_ConnectionRequest = Connect;
}
if (tCP_1_ConnectionRequest != tCP_1_ConnectionRequestLastState)
{
if (tCP_1_ConnectionState == TCP_CONNECTION_DISCONNECTED && tCP_1_ConnectionRequest == Connect)
{
pTCP_1_DriverHandle->retryNewRemote(ErrorList, &tCP_1_INetAddr, Connect);
}
else if (tCP_1_ConnectionState != TCP_CONNECTION_DISCONNECTED && tCP_1_ConnectionRequest == Disconnect)
{
pTCP_1_DriverHandle->retryNewRemote(ErrorList, NULL, Disconnect);
tCP_1_ReceiveBufferFreeBytes = 1000000;
}
tCP_1_ConnectionRequestLastState = tCP_1_ConnectionRequest;
}
}
{
int numOfSentBytes = 0;
tCP_1_NumOfSentBytes = numOfSentBytes;
tCP_1_Transmit_Status = 0;
tCP_1_SocketData2Send.len = tCP_1_Transmit_DataSize;
tCP_1_SocketData2Send.data = tCP_1_Transmit_DataVector;
tCP_1_ConnectionState = pTCP_1_DriverHandle->getConnectionState(ErrorList);
if (tCP_1_ConnectionState == TCP_CONNECTION_CONNECTED && tCP_1_SocketData2Send.len <= 200 && tCP_1_SocketData2Send.len > 0)
{
numOfSentBytes = pTCP_1_DriverHandle->send(ErrorList, &tCP_1_SocketData2Send);
if (numOfSentBytes >= 0)
{
// success
tCP_1_Transmit_Status = 1;
tCP_1_NumOfSentBytes = numOfSentBytes;
}
}
}
    rs_ds_cm11_simulinkrs_fcnModule_SIDS1_TID1->updateOutputs();

}

#endif                                 /* FM_EXIT_AP_CPP_ */
/* [EOF] */
